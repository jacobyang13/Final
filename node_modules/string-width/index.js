'use strict';
const stripAnsi = require('strip-ansi');
const isFullwidthCodePoint = require('is-fullwidth-code-point');
<<<<<<< HEAD
<<<<<<< HEAD

=======
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
>>>>>>> 29a781342148849bc9b87d20285763f3da580ab6

module.exports = str => {
	if (typeof str !== 'string' || str.length === 0) {
		return 0;
	}

	str = stripAnsi(str);

	let width = 0;

	for (let i = 0; i < str.length; i++) {
		const code = str.codePointAt(i);
<<<<<<< HEAD
=======
const emojiRegex = require('emoji-regex')();
>>>>>>> c45a70404ac3daa02c278ec2d1bc181be34464b0

>>>>>>> 9eafd39063838e3f4250b2c0d4cdefa60a9a6eef
module.exports = str => {
	if (typeof str !== 'string' || str.length === 0) {
		return 0;
	}

	str = stripAnsi(str);

	let width = 0;

<<<<<<< HEAD
	for (let i = 0; i < str.length; i++) {
		const code = str.codePointAt(i);
=======
<<<<<<< HEAD
	for (let i = 0; i < str.length; i++) {
		const code = str.codePointAt(i);
=======
	for (let i = 0; i < input.length; i++) {
		const code = input.codePointAt(i);
>>>>>>> 4be2e3e64888f0e7211201985afc193ee0c642fd
>>>>>>> c45a70404ac3daa02c278ec2d1bc181be34464b0
>>>>>>> 9eafd39063838e3f4250b2c0d4cdefa60a9a6eef
=======
>>>>>>> 29a781342148849bc9b87d20285763f3da580ab6

		// Ignore control characters
		if (code <= 0x1F || (code >= 0x7F && code <= 0x9F)) {
			continue;
		}

		// Ignore combining characters
		if (code >= 0x300 && code <= 0x36F) {
			continue;
		}

		// Surrogates
		if (code > 0xFFFF) {
			i++;
		}

		width += isFullwidthCodePoint(code) ? 2 : 1;
	}

	return width;
};
